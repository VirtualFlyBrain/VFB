<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %>
<c:choose>
	<c:when test="${(empty param.id) || (empty param.name)}" >
		<jsp:include page="/jsp/includes/homeHead.jsp">
			<jsp:param name="title" value="Advanced Search" />
			<jsp:param name="js" value="
				/javascript/ajax-solr/vfb.js;
				/javascript/ajax-solr/core/Core.js;
				/javascript/ajax-solr/core/AbstractManager.js;
				/javascript/ajax-solr/managers/Manager.jquery.js;
				/javascript/ajax-solr/core/Parameter.js;
				/javascript/ajax-solr/core/ParameterStore.js;
				/javascript/ajax-solr/core/AbstractWidget.js;
				/javascript/ajax-solr/widgets/ResultWidget.js;
				/javascript/ajax-solr/widgets/jquery/PagerWidget.js;
				/javascript/ajax-solr/core/AbstractFacetWidget.js;
				/javascript/ajax-solr/widgets/TagcloudWidget.js;
				/javascript/ajax-solr/widgets/CurrentSearchWidget.js;
				/javascript/ajax-solr/core/AbstractTextWidget.js;
				/javascript/ajax-solr/widgets/AutocompleteWidget.js;
			" />
		</jsp:include>
	</c:when>
	<c:otherwise>
		<jsp:include page="/jsp/includes/homeHead.jsp">
			<jsp:param name="title" value="${fn:replace(param.name,'%20',' ')}" />
			<jsp:param name="js" value="
				/javascript/ajax-solr/vfb.js;
				/javascript/ajax-solr/core/Core.js;
				/javascript/ajax-solr/core/AbstractManager.js;
				/javascript/ajax-solr/managers/Manager.jquery.js;
				/javascript/ajax-solr/core/Parameter.js;
				/javascript/ajax-solr/core/ParameterStore.js;
				/javascript/ajax-solr/core/AbstractWidget.js;
				/javascript/ajax-solr/widgets/ResultWidget.js;
				/javascript/ajax-solr/widgets/jquery/PagerWidget.js;
				/javascript/ajax-solr/core/AbstractFacetWidget.js;
				/javascript/ajax-solr/widgets/TagcloudWidget.js;
				/javascript/ajax-solr/widgets/CurrentSearchWidget.js;
				/javascript/ajax-solr/core/AbstractTextWidget.js;
				/javascript/ajax-solr/widgets/AutocompleteWidget.js;
			" />
		</jsp:include>
	</c:otherwise>
</c:choose>
<!-- Need to be here to load dynamically, otherwise does not work -->
	<script type="text/javascript" src="/javascript/vfb/utils.js" ></script>


<div class="row">

	<div class="col-xs-12 col-md-10 col-md-offset-1">
		<div class="well well-sm" id="search-vfb">
			<div class="row" id="search-bar">
				<div class="col-sm-5 col-md-7">
					<h3 style="margin-top: 0px; margin-bottom: 0px;">Search VFB</h3>
				</div>
				<div class="col-sm-7 col-md-4 col-md-offset-1" align="right">
		      <ul id="selection" class="list-unstyled">Loading search data <img src="/images/tools/ajax-loader.gif" alt="loading..." /></ul>
				</div>
				<div class="col-xs-12" id="search-tab" style="display: none;">
		      <span id="search">
						<input type="text" id="query" name="query" class="ui-autocomplete-input" autocomplete="off" role="textbox" aria-autocomplete="list" aria-haspopup="true" alt="Type in the name of the anatomy term/neuron to search" placeholder="Search for neuropil, neuron, lineage clone or tract" style="width:100%;">
					</span>
					<span id="warning-area"></span>
				</div>
			</div>
		</div>
	</div>

	<div id="details" class="col-xs-12 col-lg-10 col-lg-offset-1">

		<div class="row">
			<div class="col-lg-4" id="result-section" style="display: none;">
				<div class="well">
					<div class="contence-fluid" id="result">
						<div class="row" id="navigation">
							<div class="col-xs-6" id="pager-header"></div>
							<div class="col-xs-6"><ul class="list-inline" id="pager"></ul></div>
						</div>
						<dl>
							<div class="contence-fluid" id="docs"></div>
						</dl>
					</div>
				</div>
			</div>
			<div class="col-lg-8" id="details-section">
				<div class="well" id="anatomyDetails">
					<c:if test="${!empty param.id}" >
						<script>
							jQuery(function( $ ){
								$('#result-section').hide();
								$('#details-section').addClass('col-lg-12').removeClass('col-lg-8');
							});
						</script>
						<jsp:include page="/do/ont_bean.html">
							<jsp:param name="fbId" value="${param.id}" />
						</jsp:include>
					</c:if>

					<c:if test="${empty param.id}" >
						Select a specific neuron, neuropil domain, lineage clone or tract to see annotations and further query options. <br/>

						<br />
					</c:if>


					<c:if test="${!empty errorMsg}" >
						<script type="text/javascript">
							alert("${errorMsg}");
						</script>
					</c:if>
				</div>
			</div>

		</div> <!-- annotation -->
	</div>
</div>
<jsp:include page="/jsp/includes/homeFoot.jsp"/>
