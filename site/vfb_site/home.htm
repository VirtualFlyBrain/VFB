<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %>
<jsp:include page="/jsp/includes/homeHead.jsp">
	<jsp:param name="title" value="VFB Home" />
	<jsp:param name="css" value="/css/tree/autocomplete.css;" />
	<jsp:param name="js" value="
		/javascript/ajax-solr/vfb.js;
		/javascript/ajax-solr/core/Core.js;
		/javascript/ajax-solr/core/AbstractManager.js;
		/javascript/ajax-solr/managers/Manager.jquery.js;
		/javascript/ajax-solr/core/Parameter.js;
		/javascript/ajax-solr/core/ParameterStore.js;
		/javascript/ajax-solr/core/AbstractWidget.js;
		/javascript/ajax-solr/widgets/ResultWidget.js;
		/javascript/ajax-solr/widgets/jquery/PagerWidget.js;
		/javascript/ajax-solr/core/AbstractFacetWidget.js;
		/javascript/ajax-solr/widgets/TagcloudWidget.js;
		/javascript/ajax-solr/widgets/CurrentSearchWidget.js;
		/javascript/ajax-solr/core/AbstractTextWidget.js;
		/javascript/ajax-solr/widgets/AutocompleteWidget.js;
	" />
</jsp:include>

<div class="row row-centered">

	<div class="col-md-9 col-centered">

		<div class="row">

			<div class="col-md-12" id="search-box">
				<script>
					$('#search-box').load('/site/tools/anatomy_finder/index.htm #search-vfb');
				</script>
			</div>


			<div class="col-md-12">
				<div class="well" align="left">
					<center>
				    		<h2>What can VFB do for me? <small>Example queries with detailed steps</small></h2>
					</center>

					<div class="panel panel-info"> <!-- example query panel -->
					  <div class="panel-heading"><strong>Anatomy</strong></div>

						<ul class="list-group">
						  <li class="list-group-item">
								<a href="/site/stacks/index.htm?add=FBbt:00045048">
						  		What and where is the <b>saddle</b>?
						  	</a>
						  	&nbsp;
								<a href="#" tabindex="0" rel="question1" class="btn btn-info btn-xs outline" role="button" data-toggle="popover" data-trigger="focus"
									data-placement="bottom"
									title="What and where is the saddle:"
									data-popover-content="#Question1">More &raquo;
								</a>
								<div id="Question1" class="hide">
									<p>
							    	For more information on this type of query go <a href="/site/vfb_site/features.htm#3dviewer">here</a>.
							    </p>
							  	<ul>
									  <li>
									  	Go to the <a href="/site/stacks/index.htm">Stack Viewer</a>,
											accessible from the homepage or from the top menu <i>Stacks -> adult brain - Janelia</i>.
									  </li>
									  <li>
									  	In the search box above the anatomy tree on the right panel, start typing <i>saddle</i>.<br/>
									  	<b>Did you know?</b> You can also search by any known synonym, such as <i>SAD</i>.
									  </li>
									  <li>
									  	A list of matching terms appears. The term list shrinks as you continue typing.
									  </li>
									  <li>
									  	Once you see <i>saddle</i> in the list, select it (you might have to scroll down).
									  </li>
									  <li>
									  	The anatomy tree will expand to display and highlight this term.
											To highlight this domain on the stack viewer, click on the square to the left or on
											<i>centre</i> to the right of the term in the tree.
									  </li>
									  <li>
									  	The term info window at the bottom of the page will display all the annotations.
									  </li>
									  <li>
											Further queries are now possible from the <i>Query for</i> menu, at the top of
											the term info window. Hover on the query options to the right of it to see all available queries.
											Choose the desired option and click to run the query.
								   </li>
								 	</ul>
								</div>
								<script>
									$(function(){
										$('[rel="question1"]').popover({trigger: 'focus',container: 'body',html: true,content: function () {
												var clone = $($(this).data('popover-content')).clone(true).removeClass('hide');
												return clone;
											}
										}).click(function(e) {e.preventDefault();});
									});
								</script>
								
						  </li>

						  <li class="list-group-item">
								<a href="/do/ont_bean_list.html?action=synaptic&id=FBbt:00003982" target="_blank">
						  		Find neurons with synaptic terminals in the <b>AMMC</b>
						  	</a>
						  	&nbsp;
								<a href="#" tabindex="0" rel="question2" class="btn btn-info btn-xs outline" role="button" data-toggle="popover" data-trigger="focus"
									data-placement="bottom"
									title="Find neurons that innervate the AMMC:"
									data-popover-content="#Question2">More &raquo;
								</a>
								<div id="Question2" class="hide">
									<p>
									For more information on this type of query go <a href="/site/vfb_site/features.htm#neuronsbylocation">here</a>.
									</p>

									<ul>
										<li>
										Go to the <a href="/site/stacks/index.htm">Stack Viewer</a>, accessible from the homepage or from the top menu <i>Stacks -> adult brain - Janelia</i>.
										</li>
										<li>
									In the search box above the anatomy tree on the right panel, start typing <i>antennal mechanosensory and motor centre</i>.<br/>
										<b>Did you know?</b> You can also search by any known synonym, such as <i>AMMC</i>.
										</li>
										<li>
										A list of matching terms appears. The term list shrinks as you continue typing.
										</li>
										<li>
										Once you see <i>antennal mechanosensory and motor centre</i> in the list, select it (you might have to scroll down).
										</li>
										<li>
										The anatomy tree will expand to display and highlight the term <i>antennal mechanosensory and motor centre</i>. To highlight this domain on the stack viewer, click on the square to the left or on <i>centre</i> to the right of the term in the tree.
										</li>
										<li>
										The query menu is at the top of the term info window. Hover on the main query options to see all available sub-options.
										</li>
										<li>
										Select the query <i>Neuron classes with: synaptic terminals here</i>.
										</li>
										<li>
										A list with the query results will be displayed.<br/>
										<b>Did you know?</b> You can run the same query on the <a href="/site/tools/anatomy_finder/index.htm">Anatomy/Neuron Finder</a> page.
										</li>
									</ul>
								</div>
								<script>
									$(function(){
										$('[rel="question2"]').popover({trigger: 'focus',container: 'body',html: true,content: function () {
												var clone = $($(this).data('popover-content')).clone(true).removeClass('hide');
												return clone;
											}
										}).click(function(e) {e.preventDefault();});
									});
								</script>
							</li>
							<li class="list-group-item">
								<a href="/do/ont_bean_list.html?action=lineage_clone&id=FBbt:00007401" target="_blank">
						  		Find neurons that develop from one of the <b>neuroblasts in the antennal lobe</b>
							  </a>
						  	&nbsp;
								<a href="#" tabindex="0" rel="question4" class="btn btn-info btn-xs outline" role="button" data-toggle="popover" data-trigger="focus"
									data-placement="bottom"
									title="Find neurons from an AL lineage:"
									data-popover-content="#Question4">More &raquo;
								</a>
								<div id="Question4" class="hide">
									<p>
									   For more information on this type of query click <a href="/site/vfb_site/features.htm#expquery">here</a>.
									</p>
									<ul>
										<li>
											Go to the <a href="/site/tools/anatomy_finder/index.htm">Anatomy/Neuron Finder</a> page, accessible from the homepage or from the top menu <i>Tools-> Anatomy/Neuron Finder</i>.
										</li>
										<li>
											In the search box, start typing <i>mushroom body alpha/beta neuron</i>.<br/>
											<b>Did you know?</b> You can also search by any known synonym, such as <i>alpha/beta Kenyon cell</i>.
										</li>
										<li>
											A list of matching terms appears. The term list shrinks as you continue typing.
										</li>
										<li>
											Once you see <i>mushroom body alpha/beta neuron</i> in the list, select it (you might have to scroll down).
										</li>
										<li>
											The page will now display the information for that term.
										</li>
										<li>
											Further query options are available from <i>Query for</i>. Hover the tabs to the right to see all options.
										</li>
										<li>
											Select the query <i>Expression/Phenotypes found here: Transgenes expressed here</i>.
										</li>
										<li>
											A list with the query results will be displayed.<br/>
											<b>Did you know?</b> If you don't find all the results that you hoped, try running the same query for <i>mushroom body alpha or mushroom body beta lobes</i>.
										</li>
										<li>
											If images for the expression pattern of the driver are available they will be shown at the bottom of the page.
										</li>
							 		</ul>
								</div>
								<script>
									$(function(){
										$('[rel="question4"]').popover({trigger: 'focus',container: 'body',html: true,content: function () {
												var clone = $($(this).data('popover-content')).clone(true).removeClass('hide');
												return clone;
											}
										}).click(function(e) {e.preventDefault();});
									});
								</script>
							</div>	
							</li>
							<li class="list-group-item">
								<a href="/do/ont_query_result.html?action=multiquery&id=FBbt:00003852&id=FBbt:00003748&type=postsynaptic&type=presynaptic&rel=include&rel=include" target="_blank">
						  		Find neurons that have postsynaptic terminals in <b>lobula</b> and presynaptic ones in <b>medulla</b>
						  	</a>
						  	&nbsp;
								<a href="#" tabindex="0" rel="question6" class="btn btn-info btn-xs outline" role="button" data-toggle="popover" data-trigger="focus"
									data-placement="bottom"
									title="Find neurons that innervate the medulla and lobula:"
									data-popover-content="#Question6">More &raquo;
								</a>
								<div id="Question6" class="hide">
									<p>
										For more information on this type of query click <a href="/site/vfb_site/features.htm#querymenu">here</a>.
									</p>

									<ul>
										<li>
											Go to the <a href="/site/tools/query_builder/index.htm">Anatomy/Neuron Finder</a> page, accessible from the homepage or from the top menu <i>Tools-> Anatomy/Neuron Finder</i>.
										</li>
										<li>
											In the search box, start typing <i>antennal lobe</i>.<br/>
											<b>Did you know?</b> You can also search by any known synonym, such as <i>AL</i>.
										</li>
										<li>
											A list of matching terms appears. The term list shrinks as you continue typing.
										</li>
										<li>
											Once you see <i>adult antennal lobe</i> in the list, select it (you might have to scroll down).
										</li>
										<li>
											The page will now display the information for that term.
										</li>
										<li>
											Further query options are available from <i>Query for</i>. Hover the tabs to the right to see all options.
										</li>
										<li>
											Select the query: <i>Lineage clones with: some part here</i>.
										</li>
										<li>
											A list with the query results will be displayed.
										</li>
										<li>
											Click on <i>More info</i> to see more details about each lineage clone, including synonyms and thumbnail image. You can see any of the lineage clones on the <a href="/site/stacks/index.htm">Stack Viewer</a> by clicking <i>See in Viewer</i>. In this way you will be able to overlay any of the painted neuropil domains on the brain, together with the lineage clone.
										</li>
										<li>
											To find neurons, or other clones that are part of this lineage select the query: <i>Component of</i>.
											<br/>
											<b>Did you know?</b> If you know which neuroblast lineage you are looking for, you can search directly for <i>adult X lineage clone</i>, where X is the neuroblast you want.
										</li>
										<li>
											A list of neuron types is displayed. For each, you can see all the information available by clicking on <i>More info</i>. Choose your desired neuron type. On the term info page for that neuron type, in addition to the usual information, a few image examples are displayed as thumbnails. To see the complete list and to be able to see the neurons in the 3D Viewer, click on <i>Show all</i>.<br/>
											<b>Did you know?</b> From this term info page, you can also directly query for transgenes expressed in that neuron class.
										</li>
										<li>
											The list is organised in 4 columns: name of the neuron, thumbnail which displays the neuron in the 3D Viewer, neuron type and driver used.
										</li>
										<li>
											To see a neuron in the Viewer, click on <i>See in Viewer</i> in the first column, or click on the thumbnail. On the term info page, below the Viewer, all the information relative to that neuron will be displayed, together with a thumbnail.
										</li>
										<li>
											You can also create a composite view, to compare image stacks with each others (eg. compare one neuron to a lineage clone). From the Viewer, click on <i>Add to composite view</i>. Now use your browser <i>Back</i> button to go back to the Anatomy/Neuron Finder. Search for a lineage clone and click on <i>See in viewer</i> link. Again, click on <i>Add to composite view</i>. To display the composite, click on <i>View composite</i> on the </i>Edit composite view</i> page.
										</li>
									</ul>
								</div>
								<script>
									$(function(){
										$('[rel="question6"]').popover({trigger: 'focus',container: 'body',html: true,content: function () {
												var clone = $($(this).data('popover-content')).clone(true).removeClass('hide');
												return clone;
											}
										}).click(function(e) {e.preventDefault();});
									});
								</script>
							</li>
							
						</ul>
				</div> <!--end of panel-->
					
							<div class="panel panel-info"> <!-- example query panel -->
					  <div class="panel-heading"><strong>Images</strong></div>

						<ul class="list-group">

						  <li class="list-group-item">
								<a href="/do/cluster_list.html?action=cluster_found&id=FBbt:00003678" target="_blank">
						  		Find images of neurons with some part in the <b>ellipsoid body</b>
						  	</a>
						  	&nbsp;
								<a href="#" tabindex="0" rel="question3" class="btn btn-info btn-xs outline" role="button" data-toggle="popover" data-trigger="focus"
									data-placement="bottom"
									title="Find images of neuron that overlap the EB:"
									data-popover-content="#Question3">More &raquo;
								</a>
								<div id="Question3" class="hide">
									<p>
								    For more information on this type of query click <a href="/site/vfb_site/features.htm#clusterbylocation">here</a>.
							    </p>

							  	<ul>
									  <li>
								   		Go to the <a href="/site/stacks/index.htm">Stack Viewer</a>, accessible from the homepage or from the top menu <i>Stacks -> adult brain - Janelia</i>.
									  </li>
									  <li>
										 	In the search box above the anatomy tree on the right panel, start typing <i>ellipsoid body</i>.<br/>
										  <b>Did you know?</b> You can also search by any known synonym, such as <i>EB</i>.
									  </li>
									  <li>
									 		A list of matching terms appears. The term list shrinks as you continue typing.
									  </li>
									  <li>
									  	Once you see <i>ellipsoid body</i> in the list, select it (you might have to scroll down).
									  </li>
									  <li>
								   		The anatomy tree will expand to display and highlight the term <i>ellipsoid body</i>. To highlight this domain on the stack viewer, click on the square to the left or on <i>centre</i> to the right of the term in the tree.
									  </li>
									  <li>
									  	The query menu is at the top of the term info window. Hover on the main query options to see all available sub-options. </br>
											<b>Did you know?</b> You can run the same query on the <a href="/site/tools/anatomy_finder/index.htm">Anatomy/Neuron Finder</a> page.
									 	</li>
									  <li>
									  	Select the query <i>Individual neurons with: some part here</i>.
									  </li>
									  <li>
										  A list with the query results will be displayed. These are organised by cluster of neurons that overlap the antennal lobe, and these are named by the exemplar of the cluster. This allows you to quickly scan the clusters to find the neurons you are interested in.
										</li>
										<li>
											The result list has fours columns: on the left is a snapshot of the cluster, followed by the exemplar, exemplar preview and a link to see all the neurons in that cluster.
									  </li>
										<li>
											Clicking on the cluster snapshot will take you to the cluster page. There, you can see a 3D rendering of the cluster (in WebGL), and interact with it (rotate, zoom). In addition, the page displays a list of the neurons in that clusters sorted by similarity score, and a list of the top 5 clusters most similar to that one.
										</li>
										<li>
											Back on the result list, clicking on <i>Show Individual members</i>, displays a list of all the neurons that are part of that cluster. The results are organised in 4 columns: name of the neuron, thumbnail which displays the neuron in the 3D viewer, neuron class and GAL4 driver.
										</li>
										<li>
											Clicking on the thumbnail or on the <i>See in viewer</i> link will display the neuron in the viewer. This means you can overlay any of the painted anatomy domains on the brain, together with the neuron. On the term info page, below the viewer, all the information relative to that neuron will be displayed, together with a thumbnail.
										</li>
										<li>
											You can also create a composite view, to compare image stacks with each others (eg. compare two neuron images). Click on <i>Add to composite view</i>. Now use your browser <i>Back</i> button to go back to the result list. Select another neuron, click on <i>See in viewer</i> and then <i>Add to composite view</i>. Now click on <i>View composite</i> on the <i>Edit composite view</i> page.
										</li>
							 		</ul>
								</div>
								<script>
									$(function(){
										$('[rel="question3"]').popover({trigger: 'focus',container: 'body',html: true,content: function () {
												var clone = $($(this).data('popover-content')).clone(true).removeClass('hide');
												return clone;
											}
										}).click(function(e) {e.preventDefault();});
									});
								</script>
							</li>
							<li class="list-group-item">
								<a href="/do/composite_view.html?action=load&uuid=2050-07-05_10.04.35.973" target="_blank">
						  		Overlay 3 different image stacks that overlap the <b>adult central complex</b>
						  	</a>
						  	&nbsp;
								<a href="#" tabindex="0" rel="question7" class="btn btn-info btn-xs outline" role="button" data-toggle="popover" data-trigger="focus"
									data-placement="bottom"
									title="How to work with composite views:"
									data-popover-content="#Question7">More &raquo;
								</a>
								<div id="Question7" class="hide">
									<h2>Generating a composite view</h2>
								  <ul>
									  <li>
											You can build a composite view from different images stacks which have been integrated on the site. Clicking on "See in viewer" from any image stack to see that image in the Viewer. Together with the image stack, any neuropil domain can be highlighted on the brain stack.
									  </li>
									  <li>
											On this page, you can see which stacks have been added, and delete them.
									  </li>
									  <li>
											Each composite view is associated to a permanent URL, permalink, which you can share with others.
									  </li>
										<li>
											Permalinks are generated with each new browser session.<br/>
											 A permalink looks like:
											http://www.virtualflybrain.org/do/composite_view.html?action=load&uuid=2013-06-13_15.18.49.723.
										</li>
									  <li>
										  To obtain a permalink to the current composite stack, click the link "Get permalink and start new composite".
										  A pop-up window will appear asking if you are sure you want to do this. Once you obtain the permalink, that composite will no longer be editable. Click 'OK'. <br/>
										  You can copy the permalink from the dialog box that appears. The link may be displayed over more than one line, depending on the browser you use - you need to select all of it (as in example above).
									  </li>
									  <li>
										  Now you can save this link anywhere in a text file or share it via email/facebook/etc.
									  </li>
									  <li>
										  Anyone can paste the composite link in a browser address bar to view your composite at any time. (*)
									  </li>
									</ul>
									<h2> Important notes to bear in mind:</h2>
									<ul>
									  <li>
										  (*) Although we do not set a time limit on how long we keep user's composites on our server, we reserve the right to delete old composites should the number of composite stacks
										  grow too large. Old composites will be removed without prior warning to the composite owner.
									  </li>
									  <li>
										  Do note that obtaining a permalink means that you can no longer edit the composite view.
									  </li>
							 		</ul>
								</div>
								<script>
									$(function(){
										$('[rel="question7"]').popover({trigger: 'focus',container: 'body',html: true,content: function () {
												var clone = $($(this).data('popover-content')).clone(true).removeClass('hide');
												return clone;
											}
										}).click(function(e) {e.preventDefault();});
									});
								</script>
							</li>
						</ul>
							
					</div><!--example query panel-->
							
						<div class="panel panel-success"> <!-- example query panel -->
					 	 <div class="panel-heading"><strong>Expression</strong></div>

						<ul class="list-group">
							
						  	<li class="list-group-item">
								<a href="/do/gene_list.html?action=transgene&id=FBbt:00100248" target="_blank">
						  		Find transgenes expressed in <b>mushroom body alpha/beta neurons</b>
						  	</a>
						  	&nbsp;
								<a href="#" tabindex="0" rel="question5" class="btn btn-info btn-xs outline" role="button" data-toggle="popover" data-trigger="focus"
									data-placement="bottom"
									title="Find transgenes expressed in the MB-alpha/beta neurons:"
									data-popover-content="#Question5">More &raquo;
								</a>
								<div id="Question5" class="hide">
									<p>
										For more information on this type of query click <a href="/site/vfb_site/features.htm#querybuilder">here</a>.
									</p>

									<ul>
										<li>
											Go to the <a href="/site/tools/query_builder/index.htm">Anatomy/Neuron Finder</a> page, accessible from the homepage or from the top menu <i>Tools ->  Query Builder</i>.
										</li>
										<li>
											In the search box above the anatomy tree, start typing <i>lobula</i>.<br/>
										</li>
										<li>
											A list of matching terms appears. The term list shrinks as you continue typing.
										</li>
										<li>
											Once you see <i>lobula</i> in the list, select it (you might have to scroll down).
										</li>
										<li>
											The anatomy tree will expand to display and highlight the term <i>lobula</i>. To highlight this domain on the stack viewer, click on the square to the left or on <i>centre</i> to the right of the term in the tree.
										</li>
										<li>
											To add the term to the query, click  <i>Add to the query</i> at the top of the term info window.
										</li>
										<li>
											The entry for <i>lobula</i> will be added to the panel on the right, <i>Your query</i> - that represents your current query.<br/>
											The query text below will be updated to reflect your query.
										</li>
										<li>
											Select the directionality of the connectivity, by changing the type of terminals from <i>synaptic</i> to <i>postsynaptic</i> using the dropdown menu to the right of the term.
										</li>
										<li>
											Repeat the same steps for <i>medulla</i>.
										</li>
										<li>
											Check the query text in the <i>Your query</i> panel. When happy with it, click the <i>Execute</i> button at the bottom of the <i>Your query</i> panel.
										</li>
										<li>
											A list with the query results will be displayed.
										</li>
									</ul>
								</div>
								<script>
									$(function(){
										$('[rel="question5"]').popover({trigger: 'focus',container: 'body',html: true,content: function () {
												var clone = $($(this).data('popover-content')).clone(true).removeClass('hide');
												return clone;
											}
										}).click(function(e) {e.preventDefault();});
									});
								</script>
								</li>
							</ul>  
					</div><!-- example query panel -->
					

				</div><!-- well-->
				
			</div> <!-- div col -->

			<div class="col-md-3" align="center">
				<div class="well" align="center">
					<a href="/site/stacks/index.htm" title="Explore and run queries on the adult Drosophila Brain">
						<h3>Adult Brain Anatomy</h3><img src="/images/vfb/project/viewerIcon.png" style="max-width:100%;" />
					</a>
				</div>
			</div>

			<div class="col-md-6" align="center">
				<div class="well" align="center">
					<jsp:include page="/site/vfb_site/whats_new.htm" />
					<p>For full details about the site see the <a href="features.htm">features</a> page.</p>
				</div>
			</div>

			<div class="col-md-3" align="center">
				<div class="well" align="center">
					<a href="/site/tools/query_builder/index.htm" title="Build and execute connectivity queries">
						<h3>Connectivity Query</h3><img src="/images/vfb/project/queryBuilderIcon.png" style="max-width:100%;" />
					</a>
				</div>
			</div>

			<div class="clearfix visible-md-block"></div>


			<div class="col-md-7" align="center">
				<div class="well" align="center">
					<a href="http://www.youtube.com/channel/UC1g10aJo13fXpO9VwRJPdHg" target="_new" style="z-index:0"> <h3 style="margin:3px">Tutorial videos</h3></a>
					<!-- 16:9 aspect ratio -->
					<div class="embed-responsive embed-responsive-16by9">
					  <iframe class="embed-responsive-item" src="//www.youtube.com/embed/videoseries?list=PLByf4V60-spifADBofOXP3dp-Gpd6xff6"></iframe>
					</div>
				</div>
			</div> <!-- icon_row -->

			<div class="col-md-5 col-centered">
						<div class="content">
							<jsp:include page="/jsp/includes/bits/homeRight.jsp" />
						</div>
			</div><!--/.sidebar-offcanvas-->

		</div>



	</div>






</div><!--/row-->


<jsp:include page="/jsp/includes/homeFoot.jsp" />
